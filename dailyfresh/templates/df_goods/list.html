{%extends 'base.html'%}
{%block head%}
	<link rel="stylesheet" type="text/css" href="/static/css/reset.css">
	<link rel="stylesheet" type="text/css" href="/static/css/main.css">
{%endblock head%}

{%block content%} <script>
    function calcTotal() {
        price=parseFloat($('.show_pirze > em').text());
        count=parseInt($('.num_show').val());
        $('.total > em').text((price*count).toFixed(2));
    }

    $(function () {
        $('.num_show').blur(function () {
            calcTotal();
        });
        $('.add').click(function () {
            $('.num_show').val(parseInt($('.num_show').val())+1);
            calcTotal();
        });
        $('.minus').click(function () {
            count=parseInt($('.num_show').val())-1;
            if(count<=1){
                $('.num_show').val(1);
            }else{
                $('.num_show').val(count);
            }
            calcTotal();
        });
    });
    </script>
	<div class="navbar_con">
		<div class="navbar clearfix">
			<div class="subnav_con fl">
				<h1>全部商品分类</h1>
				<span></span>
				<ul class="subnav">
					<li><a href="#" class="fruit">新鲜水果</a></li>
					<li><a href="#" class="seafood">海鲜水产</a></li>
					<li><a href="#" class="meet">猪牛羊肉</a></li>
					<li><a href="#" class="egg">禽类蛋品</a></li>
					<li><a href="#" class="vegetables">新鲜蔬菜</a></li>
					<li><a href="#" class="ice">速冻食品</a></li>
				</ul>
			</div>
			<ul class="navlist fl">
				<li><a href="">首页</a></li>
				<li class="interval">|</li>
				<li><a href="">手机生鲜</a></li>
				<li class="interval">|</li>
				<li><a href="">抽奖</a></li>
			</ul>
		</div>
	</div>


	<div class="breadcrumb">
		全部分类
		<span>></span>
		{{ gtype.ttitle }}
	</div>

	<div class="main_wrap clearfix">
		<div class="l_wrap fl clearfix">
			<div class="new_goods">
				<h3>新品推荐</h3>
				<ul>
                    {% for new in new_list %}
					<li>
						<a href="{{goods.id}}"><img src="/static/{{ new.gpic }}"></a>
						<h4><a href="{{goods.id}}">{{ new.gtitle }}</a></h4>
						<div class="prize">￥{{ new.gprice }}</div>
					</li>
                    {% endfor %}
				</ul>
			</div>
		</div>


		<div class="r_wrap fr clearfix">
			<div class="sort_bar">
				<a href="/list{{ tid }}_1_1/" {% if orderby == '1' %}class="active"{% endif %}>最新</a>
				<a href="/list{{ tid }}_1_2/" {% if orderby == '2' %}class="active"{% endif %}>价格</a>
				<a href="/list{{ tid }}_1_3/" {% if orderby == '3' %}class="active"{% endif %}>人气</a>
			</div>

			<ul class="goods_type_list clearfix">
                {% for goods in page %}
				<li>
					<a href="/{{goods.id}}/"><img src="/static/{{ goods.gpic }}"></a>
					<h4><a href="/{{goods.id}}/">{{ goods.gtitle }}</a></h4>
					<div class="operate">
						<span class="prize">￥{{ goods.gprice }}</span>
						<span class="unit">{{ goods.gprice }}/{{ goods.gunit }}</span>
						<a href="/cart/add{{goods.id}}_1/" class="add_goods" title="加入购物车"></a>
					</div>
				</li>
                {% endfor %}
			</ul>

			<div class="pagenation">
				<!--<a href="#"><上一页</a>-->
				<!--<a href="#" class="active">1</a>-->
				<!--<a href="#">2</a>-->
				<!--<a href="#">3</a>-->
				<!--<a href="#">4</a>-->
				<!--<a href="#">5</a>-->
				<!--<a href="#">下一页></a>-->
				{% if page.has_previous %}
				<!--有上一页返回true-->
				<!--<a href="/list{{typeinfo.id}}_{{page.previous_page_number}}_{{sort}}/"></a>-->
				<a href="/list{{tid}}_1_{{oderby}}/">首页</a>
				<a href="/list{{tid}}_{{page.number|add:-1}}_{{oderby}}/">上一页</a>
				{% endif %}
				{% if page.paginator.num_pages <= 5 %}
					{% for index in page.paginator.page_range%}
						{% if index == page.number %}
							<a href="#" class="active">{{ index }}</a>
						{% else %}
							<a href="/list{{tid}}_{{index}}_{{orderby}}/">{{index}}</a>
						{% endif %}
					{% endfor %}
				{% else %}
					{% if page.number == 1 %}
						<a href="#" class="active">1</a>
						<a href="/list{{ tid }}_2_{{ orderby }}/">2</a>
						<a href="/list{{ tid }}_3_{{ orderby }}/">3</a>
						<a href="/list{{ tid }}_4_{{ orderby }}/">4</a>
						<a href="/list{{ tid }}_5_{{ orderby }}/">5</a>
					{% elif page.number == 2 %}
						<a href="/list{{ tid }}_1_{{ orderby }}/">1</a>
						<a href="#" class="active">2</a>
						<a href="/list{{ tid }}_3_{{ orderby }}/">3</a>
						<a href="/list{{ tid }}_4_{{ orderby }}/">4</a>
						<a href="/list{{ tid }}_5_{{ orderby }}/">5</a>
					{% elif page.number == page.paginator.num_pages|add:-1 %}
						<a href="/list{{ tid }}_{{ page.number|add:-3 }}_{{ orderby }}/">{{ page.number|add:-3 }}</a>
						<a href="/list{{ tid }}_{{ page.number|add:-2 }}_{{ orderby }}/">{{ page.number|add:-2 }}</a>
						<a href="/list{{ tid }}_{{ page.number|add:-1 }}_{{ orderby }}/">{{ page.number|add:-1 }}</a>
						<a href="#" class="active">{{ page.number }}</a>
						<a href="/list{{ tid }}_{{ page.number|add:1 }}_{{ orderby }}/">{{ page.number|add:1 }}</a>
					{% elif page.number == page.paginator.num_pages %}
						<a href="/list{{ tid }}_{{ page.number|add:-4 }}_{{ orderby }}/">{{ page.number|add:-4 }}</a>
						<a href="/list{{ tid }}_{{ page.number|add:-3 }}_{{ orderby }}/">{{ page.number|add:-3 }}</a>
						<a href="/list{{ tid }}_{{ page.number|add:-2 }}_{{ orderby }}/">{{ page.number|add:-2 }}</a>
						<a href="/list{{ tid }}_{{ page.number|add:-1 }}_{{ orderby }}/">{{ page.number|add:-1 }}</a>
						<a href="#" class="active">{{ page.number }}</a>
					{% else %}
						<a href="/list{{ tid }}_{{ page.number|add:-2 }}_{{ orderby }}/">{{ page.number|add:-2 }}</a>
						<a href="/list{{ tid }}_{{ page.number|add:-1 }}_{{ orderby }}/">{{ page.number|add:-1 }}</a>
						<a href="#" class="active">{{ page.number }}</a>
						<a href="/list{{ tid  }}_{{ page.number|add:1 }}_{{ orderby }}/">{{ page.number|add:1 }}</a>
						<a href="/list{{ tid }}_{{ page.number|add:2 }}_{{ orderby }}/">{{ page.number|add:2 }}</a>
					{% endif %}
				{% endif %}

				{% if page.has_next %}
					<a href="/list{{ tid }}_{{ page.number|add:1 }}_{{ orderby }}/">下一页</a>
					<a href="/list{{ tid }}_{{ page.paginator.num_pages }}_{{ orderby }}/">末页</a>

				{% endif %}
			</div>
		</div>
	</div>
{% endblock content %}
